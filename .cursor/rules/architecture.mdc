---
alwaysApply: true
---

# Course Generator Agent Architecture

This project uses a **multi-agent architecture** with **LangGraph StateGraph** for workflow orchestration.

## Core Architecture
- **Entry Point**: [main/workflow.py](mdc:main/workflow.py) contains the LangGraph workflow definition
- **State Management**: [main/state.py](mdc:main/state.py) defines the shared CourseState using Pydantic
- **Agent Directory**: [agents/](mdc:agents/) contains specialized AI agents
- **Shared Tools**: [tools/](mdc:tools/) for cross-agent utilities (extensible)
- **Development**: [notebooks/](mdc:notebooks/) for testing and experimentation

## Agent Structure
Each agent follows this pattern:
- `agents/{agent_name}/agent.py` - Main logic and LLM integration
- `agents/{agent_name}/prompts.py` - Prompt templates using LangChain PromptTemplate
- `agents/{agent_name}/utils.py` - Agent-specific utilities

## Workflow Pattern
1. Agents operate on shared `CourseState` from [main/state.py](mdc:main/state.py)
2. Sequential workflow: skeleton generation â†’ parallel content generation  
3. Error handling with retry logic and fallbacks
4. Async/await for parallel processing with semaphore controls

## Key Dependencies
- **LangGraph**: Workflow orchestration
- **LangChain**: LLM integration and prompt management
- **Mistral AI**: Primary LLM provider
- **Pydantic**: Type-safe data models with validation
- **asyncio**: Parallel processing capabilities

## Configuration
- Environment: `MISTRAL_API_KEY` and optional `MISTRAL_MODEL_NAME`
- Concurrency controlled via `CourseState.concurrency`
- Retry logic configurable via `max_retries` parameter